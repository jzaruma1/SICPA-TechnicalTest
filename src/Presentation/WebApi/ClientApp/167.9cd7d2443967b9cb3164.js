"use strict";(self.webpackChunkclient_app=self.webpackChunkclient_app||[]).push([[167],{9167:(ut,c,r)=>{r.r(c),r.d(c,{DepartmentModule:()=>mt});var u=r(8583),p=r(4655),a=r(3679),t=r(7716),f=r(834),v=r(7001),A=r(1728),s=r(5618),g=r(1095),Z=r(8030),h=r(6627),d=r(8295),D=r(9983),C=r(7441),q=r(5396),y=r(2458);function N(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Field requiredo. "),t.qZA())}function U(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Field requiredo. "),t.qZA())}function L(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Field requiredo. "),t.qZA())}function _(e,o){if(1&e&&(t.TgZ(0,"mat-option",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.Q6J("value",n.id),t.xp6(1),t.hij(" ",n.name," ")}}function I(e,o){1&e&&(t.TgZ(0,"mat-error"),t._uU(1," Field requiredo. "),t.qZA())}const Y=function(){return["/departments"]};let T=(()=>{class e{constructor(n,i,m,lt,st,pt){this.departmentService=n,this.route=i,this.fb=m,this.router=lt,this.snackBar=st,this.enterprise=pt}ngOnInit(){this.initForm(),this.initData(),this.entityId=this.route.snapshot.paramMap.get("id"),this.entityId&&this.loadRecord()}loadRecord(){this.departmentService.get(this.entityId).subscribe(n=>{n.result&&(this.entity=n.result,this.form.patchValue(this.entity,{emitEvent:!1}))})}initForm(){this.form=this.fb.group({id:[0],name:["",a.kI.required],description:["",a.kI.required],phone:["",a.kI.required],enterpriseId:[0,a.kI.required],status:[!0,a.kI.required],createdBy:[""],modifiedBy:[""],enterpriseName:[""],employeeNames:[""]})}initData(){this.enterprise.getAll(1e3,1).subscribe(n=>{n&&n.result&&n.result.results&&(this.enterprises=n.result.results)})}save(){this.form.valid?(this.entityId?this.departmentService.update(this.form.getRawValue(),this.entityId):this.departmentService.add(this.form.getRawValue())).subscribe(i=>{i&&(this.snackBar.open(`Department ${this.entityId?"updated":"saved"}!!`,"Ok"),this.router.navigateByUrl("/departments"))}):this.snackBar.open("Complete the required fields.","Ok")}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.n),t.Y36(p.gz),t.Y36(a.qu),t.Y36(p.F0),t.Y36(v.ux),t.Y36(A.o))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-department-detail"]],decls:52,vars:9,consts:[[1,"h-full","flex","flex-col","overflow-hidden"],[1,"flex","flex-col","p-5"],["fxLayout","row"],["fxFlex","30","fxLayoutAlign","start center ",1,"font-bold","text-2xl"],["fxFlex","auto","fxLayoutAlign","end center","fxLayoutGap","5px"],["mat-raised-button","","ngClass.md","order-5","ngClass.xs","order-1","color","accent",3,"routerLink"],[1,"flex-grow","flex","flex-col","overflow-auto"],[1,"flex-grow","overflow-auto","relative"],[1,"w-full","space-x-5"],[3,"formGroup","ngSubmit"],[1,"w-full","mt-4","p-5","md:p-10"],[1,"grid","grid-cols-2","gap-3"],[1,"w-full","tight-custom"],["autocomplete","off","matInput","","formControlName","name"],[4,"ngIf"],["autocomplete","off","matInput","","formControlName","description"],["autocomplete","off","maxlength","10","matInput","","formControlName","phone"],["formControlName","enterpriseId","placeholder","Select"],[3,"value",4,"ngFor","ngForOf"],["fxLayoutAlign","start center"],["color","primary","formControlName","status",1,"example-margin"],["fxFlex","","fxLayoutAlign","center center"],["mat-raised-button","","fxFlex","10","fxFlex.xs","40","color","primary"],[3,"value"]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.TgZ(7,"mat-icon"),t._uU(8,"keyboard_backspace"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Back"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"div",8),t.TgZ(14,"form",9),t.NdJ("ngSubmit",function(){return i.save()}),t.TgZ(15,"div",10),t.TgZ(16,"div",11),t.TgZ(17,"div"),t.TgZ(18,"mat-form-field",12),t.TgZ(19,"mat-label"),t._uU(20,"Name"),t.qZA(),t._UZ(21,"input",13),t.YNc(22,N,2,0,"mat-error",14),t.qZA(),t.qZA(),t.TgZ(23,"div"),t.TgZ(24,"mat-form-field",12),t.TgZ(25,"mat-label"),t._uU(26,"Description"),t.qZA(),t._UZ(27,"input",15),t.YNc(28,U,2,0,"mat-error",14),t.qZA(),t.qZA(),t.TgZ(29,"div"),t.TgZ(30,"mat-form-field",12),t.TgZ(31,"mat-label"),t._uU(32,"Phone"),t.qZA(),t._UZ(33,"input",16),t.YNc(34,L,2,0,"mat-error",14),t.qZA(),t.qZA(),t.TgZ(35,"div"),t.TgZ(36,"mat-form-field",12),t.TgZ(37,"mat-label"),t._uU(38,"Enterprise"),t.qZA(),t.TgZ(39,"mat-select",17),t.YNc(40,_,2,2,"mat-option",18),t.qZA(),t.YNc(41,I,2,0,"mat-error",14),t.qZA(),t.qZA(),t.TgZ(42,"div",19),t.TgZ(43,"mat-slide-toggle",20),t._uU(44," Status "),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(45,"div",2),t.TgZ(46,"div",21),t.TgZ(47,"button",22),t.TgZ(48,"mat-icon"),t._uU(49,"save"),t.qZA(),t.TgZ(50,"span"),t._uU(51,"Save"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA()),2&n&&(t.xp6(4),t.hij(" ",i.entityId?"Edit ":"New ","Department "),t.xp6(2),t.Q6J("routerLink",t.DdM(8,Y)),t.xp6(8),t.Q6J("formGroup",i.form),t.xp6(8),t.Q6J("ngIf",i.form.controls.name.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.form.controls.description.hasError("required")),t.xp6(6),t.Q6J("ngIf",i.form.controls.phone.hasError("required")),t.xp6(6),t.Q6J("ngForOf",i.enterprises),t.xp6(1),t.Q6J("ngIf",i.form.controls.enterpriseId.hasError("required")))},directives:[s.xw,s.yH,s.Wh,s.SQ,g.lW,Z.oO,p.rH,h.Hw,a._Y,a.JL,a.sg,d.KE,d.hX,D.Nt,a.Fj,a.JJ,a.u,u.O5,a.nD,C.gD,u.sg,q.Rr,d.TO,y.ey],encapsulation:2}),e})();var x=r(9692),Q=r(4402),S=r(5917),w=r(3190),l=r(2789),J=r(1769),F=r(1436);function B(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Name "),t.qZA())}function b(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.name," ")}}function O(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Description "),t.qZA())}function M(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.description," ")}}function R(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Phone "),t.qZA())}function E(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.phone," ")}}function j(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Enterprise "),t.qZA())}function H(e,o){if(1&e&&(t.TgZ(0,"td",23),t._uU(1),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.hij(" ",n.enterpriseName," ")}}function k(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Employees "),t.qZA())}function z(e,o){if(1&e&&(t.TgZ(0,"td",23),t.TgZ(1,"button",24),t.TgZ(2,"span"),t._uU(3),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit,i=t.oxw();t.xp6(1),t.Q6J("matTooltip",i.getTooltip(n)),t.xp6(2),t.hij(" ",i.getTooltipCount(n)," ")}}function $(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Status "),t.qZA())}function W(e,o){1&e&&(t.TgZ(0,"mat-icon",27),t._uU(1,"check_circle"),t.qZA())}function G(e,o){if(1&e&&(t.TgZ(0,"td",23),t.TgZ(1,"span",25),t.YNc(2,W,2,0,"mat-icon",26),t.qZA(),t.qZA()),2&e){const n=o.$implicit;t.oxw();const i=t.MAs(40);t.xp6(1),t.Q6J("matTooltip",n.status?"Enabled":"Disabled"),t.xp6(1),t.Q6J("ngIf",n.status)("ngIfElse",i)}}function V(e,o){1&e&&(t.TgZ(0,"th",22),t._uU(1," Opcion "),t.qZA())}const X=function(e){return["/departments","edit",e]};function K(e,o){if(1&e&&(t.TgZ(0,"td",23),t.TgZ(1,"span",28),t.TgZ(2,"mat-icon",27),t._uU(3,"edit"),t.qZA(),t.qZA(),t.qZA()),2&e){const n=o.$implicit;t.xp6(1),t.Q6J("routerLink",t.VKq(1,X,n.id))}}function P(e,o){1&e&&t._UZ(0,"tr",29)}function tt(e,o){1&e&&t._UZ(0,"tr",30)}function et(e,o){1&e&&(t.TgZ(0,"mat-icon"),t._uU(1,"highlight_off"),t.qZA())}const nt=function(){return["/departments","new"]},ot=function(){return[10,50,100]},it=[{path:"",component:(()=>{class e{constructor(n){this.departmentService=n,this.displayedColumns=["name","description","phone","enterpriseName","employees","status","option"],this.dataSource=[],this.records=10}ngOnInit(){this.loadItems(),(0,Q.D)(this.paginator.page).pipe((0,w.w)(()=>(this.loadItems(this.paginator.pageSize,this.paginator.pageIndex+1),(0,S.of)(null)))).subscribe()}loadItems(n=10,i=1){this.departmentService.getAll(n,i).subscribe(m=>{m&&m.result&&m.result.results&&(this.dataSource=m.result.results,this.records=m.result.rowCount)})}getTooltipCount(n){var i;return n.employeeNames.length?null===(i=n.employeeNames.split(","))||void 0===i?void 0:i.length:0}getTooltip(n){return n.employeeNames.length?n.employeeNames.split(",").join(" - "):""}}return e.\u0275fac=function(n){return new(n||e)(t.Y36(f.n))},e.\u0275cmp=t.Xpm({type:e,selectors:[["app-department-list"]],viewQuery:function(n,i){if(1&n&&t.Gf(x.NW,7),2&n){let m;t.iGM(m=t.CRH())&&(i.paginator=m.first)}},decls:41,vars:8,consts:[[1,"h-full","flex","flex-col","overflow-hidden"],[1,"flex","flex-col","p-5"],["fxLayout","row"],["fxFlex","30","fxLayoutAlign","start center ",1,"font-bold","text-2xl"],["fxFlex","auto","fxLayoutAlign","end center"],["mat-raised-button","","ngClass.md","order-5","ngClass.xs","order-1","color","primary",3,"routerLink"],[1,"flex-grow","flex","flex-col","overflow-auto"],[1,"flex-grow","overflow-auto","relative"],["mat-table","",1,"mat-elevation-z8","min-w-full","w-fit",3,"dataSource"],["matColumnDef","name"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","description"],["matColumnDef","phone"],["matColumnDef","enterpriseName"],["matColumnDef","employees"],["matColumnDef","status"],["matColumnDef","option"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],["aria-label","Select page",3,"length","pageSizeOptions"],["noCheck",""],["mat-header-cell",""],["mat-cell",""],["mat-raised-button","",3,"matTooltip"],[3,"matTooltip"],["color","primary",4,"ngIf","ngIfElse"],["color","primary"],[1,"cursor-pointer",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(n,i){1&n&&(t.TgZ(0,"div",0),t.TgZ(1,"div",1),t.TgZ(2,"div",2),t.TgZ(3,"div",3),t._uU(4," Departments "),t.qZA(),t.TgZ(5,"div",4),t.TgZ(6,"button",5),t.TgZ(7,"mat-icon"),t._uU(8,"add"),t.qZA(),t.TgZ(9,"span"),t._uU(10,"Add"),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.qZA(),t.TgZ(11,"div",6),t.TgZ(12,"div",7),t.TgZ(13,"table",8),t.ynx(14,9),t.YNc(15,B,2,0,"th",10),t.YNc(16,b,2,1,"td",11),t.BQk(),t.ynx(17,12),t.YNc(18,O,2,0,"th",10),t.YNc(19,M,2,1,"td",11),t.BQk(),t.ynx(20,13),t.YNc(21,R,2,0,"th",10),t.YNc(22,E,2,1,"td",11),t.BQk(),t.ynx(23,14),t.YNc(24,j,2,0,"th",10),t.YNc(25,H,2,1,"td",11),t.BQk(),t.ynx(26,15),t.YNc(27,k,2,0,"th",10),t.YNc(28,z,4,2,"td",11),t.BQk(),t.ynx(29,16),t.YNc(30,$,2,0,"th",10),t.YNc(31,G,3,3,"td",11),t.BQk(),t.ynx(32,17),t.YNc(33,V,2,0,"th",10),t.YNc(34,K,4,3,"td",11),t.BQk(),t.YNc(35,P,1,0,"tr",18),t.YNc(36,tt,1,0,"tr",19),t.qZA(),t.qZA(),t._UZ(37,"mat-divider"),t._UZ(38,"mat-paginator",20),t.qZA(),t.qZA(),t.YNc(39,et,2,0,"ng-template",null,21,t.W1O)),2&n&&(t.xp6(6),t.Q6J("routerLink",t.DdM(6,nt)),t.xp6(7),t.Q6J("dataSource",i.dataSource),t.xp6(22),t.Q6J("matHeaderRowDef",i.displayedColumns),t.xp6(1),t.Q6J("matRowDefColumns",i.displayedColumns),t.xp6(2),t.Q6J("length",i.records)("pageSizeOptions",t.DdM(7,ot)))},directives:[s.xw,s.yH,s.Wh,g.lW,Z.oO,p.rH,h.Hw,l.BZ,l.w1,l.fO,l.Dz,l.as,l.nj,J.d,x.NW,l.ge,l.ev,F.gM,u.O5,l.XQ,l.Gk],encapsulation:2}),e})()},{path:"new",component:T},{path:"edit/:id",component:T}];let rt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[p.Bz.forChild(it)],p.Bz]}),e})();var at=r(3887);let mt=(()=>{class e{}return e.\u0275fac=function(n){return new(n||e)},e.\u0275mod=t.oAB({type:e}),e.\u0275inj=t.cJS({imports:[[u.ez,rt,at.m]]}),e})()}}]);